<!DOCTYPE html>
<html lang="en">

{% load static %}

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    REACH Dashboard
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet" />
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <!-- Nucleo Icons -->
  <link href="{% static 'assets/css/nucleo-icons.css' %}" rel="stylesheet" />
  <!-- CSS Files -->
  <link href="{% static 'assets/css/black-dashboard.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/custom.css' %}" rel="stylesheet" />
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link href="{% static 'assets/demo/demo.css' %}" rel="stylesheet" />


  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
      integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
      crossorigin=""></script>


</head>

<body class="sidebar-mini " >
  <div class="wrapper">
    <div class="navbar-minimize-fixed"  >
      <button>
        <i class="tim-icons icon-align-center visible-on-sidebar-regular text-muted"></i>
        <i class="tim-icons icon-bullet-list-67 visible-on-sidebar-mini text-muted"></i>
      </button>
    </div>
    <div class="sidebar" style="overflow:none">
      <div class="sidebar-wrapper" style="background-color: #d2262f;">
        <div class="logo">
          <a href="javascript:void(0)" class="simple-text logo-mini">
            <i class="tim-icons icon-single-copy-04"></i>
          </a>
          <a href="javascript:void(0)" class="simple-text logo-normal">
            PROJECTS
          </a>
        </div>
        <ul class="nav">
          <li>
            <a href="./template.html">
                <i class="tim-icons icon-notes"></i>
              <p>Wintershall DEA</p>
            </a>
          </li>
          <li>
            <a href="./template.html">
                <i class="tim-icons icon-notes"></i>
              <p>Equinor</p>
            </a>
          </li>
          <li>
            <a href="./template.html">
                <i class="tim-icons icon-notes"></i>
              <p>BP Trinidad & Tobago</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel" style="border-top: 5px solid #d2262f;">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg fixed-top" style="background-color: #fff; border-top: 5px solid #d2262f;">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <div class="navbar-minimize d-inline">
              <button class="minimize-sidebar btn btn-link btn-just-icon" rel="tooltip" >
                <i class="tim-icons icon-align-center visible-on-sidebar-regular" style="color: #000"></i>
                <i class="tim-icons icon-bullet-list-67 visible-on-sidebar-mini" style="color: #000"></i>
              </button>
            </div>
            <div class="navbar-toggle d-inline">
              <button type="button" class="navbar-toggler">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </button>
            </div>
              <a class="navbar-brand"><img class="reach-logo" src="{% static './assets/img/Reach-Subsea-logo-rgb.png' %}"></a>
          </div>
<!--
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
          </button>
-->
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="navbar-nav ml-auto">
              <li class="search-bar input-group" >
            <form class="form-inline ml-auto" >



                <button type="submit" class="btn btn-link btn-icon btn-round">
                    <i class="tim-icons icon-zoom-split" style="color: #000"></i>
                </button>
            </form>
              </li>

              <li class="dropdown nav-item">
                <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                  <div class="photo">
                    <img src="{% static 'assets/img/mike.jpg' %}" alt="Profile Photo">
                  </div>
                  <b class="caret d-none d-lg-block d-xl-block"></b>
                  <p class="d-lg-none">
                    Log out
                  </p>
                </a>
                <ul class="dropdown-menu dropdown-navbar">
                  <li class="nav-link">
                    <a href="javascript:void(0)" class="nav-item dropdown-item">Profile</a>
                  </li>
                  <li class="nav-link">
                    <a href="javascript:void(0)" class="nav-item dropdown-item">Settings</a>
                  </li>
                  <li class="dropdown-divider"></li>
                  <li class="nav-link">
                    <a href="javascript:void(0)" class="nav-item dropdown-item">Log out</a>
                  </li>
                </ul>
              </li>
              <li class="separator d-lg-none"></li>
            </ul>
          </div>
        </div>
      </nav>
      <div class="modal modal-search fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="SEARCH">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <i class="tim-icons icon-simple-remove"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- End Navbar -->




      <div class="content-new"></div>
           <div class="content" style="background-color: #151515;  ">



             <div class="col-md-12 mb-4">
               <h1 class="text-center card-title" style="padding: 30px;">{{project.client}}</h1>

             </div>



          <div class="row mt-5">

            <div class="col-lg-3 col-sm-6">

              <div class="card card-primary"  style="background-color: #2a2a2a; border-bottom: 1px solid red; height:200px">
                <div class="card-body">

                    <h4 class="text-center" style="padding-top: 15px; "> TOTAL ANOMALIES</h4>
                    <hr style="background-color : #fff">
                    <h1 class="text-center">{{total_anomalies}}</h1>


                </div>

              </div>
            </div>

            <div class="col-lg-3 col-sm-6">

              <div class="card card-primary"  style="background-color: #2a2a2a; border-bottom: 1px solid red; height:200px">
                <div class="card-body">

                    <h4 class="text-center" style="padding-top: 15px; ">CLIENT SIGNED</h4>
                    <hr style="background-color : #fff">
                    <h1 class="text-center">{{signed}}</h1>

                </div>

              </div>
            </div>

            <div class="col-lg-3 col-sm-6">

              <div class="card card-primary"  style="background-color: #2a2a2a; border-bottom: 1px solid red; height:200px">
                <div class="card-body">

                    <h4 class="text-center" style="padding-top: 15px; "> OUTSTANDING CLIENT SIGNED</h4>
                    <hr style="background-color : #fff">
                    <h1 class="text-center">{{not_signed}}</h1>

                </div>

              </div>
            </div>

            <div class="col-lg-3 col-sm-6">

              <div class="card card-primary"  style="background-color: #2a2a2a; border-bottom: 1px solid red; height:200px">
                <div class="card-body">

                    <h4 class="text-center" style="padding-top: 15px; "> REFERENCE DOCUMENTS</h4>
                    <hr style="background-color : #fff">
                    <h1 class="text-center"></h1>

                </div>

              </div>
            </div>




            <div class="col-md-12">






              <div class="card" style="background-color: #2a2a2a; border-bottom: 1px solid red">

                <div class="card-body">
                  <h4>MASTER ANOMALY LISTING</h4>
<hr style="background-color : #fff">
                  <div class="text-center">
                  <a href='/create_anomaly/?next={{ request.path}}'>   <button class="btn btn-pinterest">
                       <i class="tim-icons icon-simple-add"></i> ADD NEW ANOMALY
                     </button></a>
                  </div>

                    <hr style="background-color : #fff">
                  <div class="toolbar">
                    <!--        Here you can write extra buttons/actions for the toolbar              -->
                  </div>
                  <table id="datatable" class="table table-striped">
                    <thead>
                      <tr class="text-center">
                        <th style="width: 10%">IMAGE</th>
                        <th>ID</th>
                        <th>TYPE</th>
                        <th>CRITICALITY</th>
                        <th>ASSET</th>
                        <th>COMPONENT</th>
                        <th>SUB-COMPONENT</th>
                        <th>DATE</th>
                        <th>REVIEW STATUS</th>
                        <th class="sorting_desc_disabled sorting_asc_disabled ">DETAILS / MEDIA</th>
                        <th class="sorting_desc_disabled sorting_asc_disabled ">Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for list in anomaly %}
                      <tr class="text-center">
                        <td><img src="{{list.image_1.url}}" ></td>
                        <td>{{list.anomaly_id}}</td>
                        <td>{{list.code}}</td>
                        <td>{{list.criticality}}</td>
                        <td>{{list.asset}}</td>
                        <td>{{list.component}}</td>
                        <td>{{list.sub_component}}</td>
                        <td>{{list.DateTime}}</td>
                        <td>{{list.review_status}}</td>
                        <td class="text-center">
                          <a href="{% url 'anom' list.id %}" class="btn btn-link btn-info btn-icon btn-sm "><i class="tim-icons icon-notes"></i></a>
                        </td>
                        <td>
                          <a href='/update_anomaly/{{ list.id}}/?next=/main/{{ project.id}}' class="btn btn-link btn-warning btn-icon btn-sm "><i class="tim-icons icon-pencil"></i></a>
                          <a href='/delete_anomaly/{{ list.id}}/?next=/main/{{ project.id}}' class="btn btn-link btn-danger btn-icon btn-sm"><i class="tim-icons icon-simple-remove"></i></a>
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>

                  </table>
              <hr style="background-color : #fff">

                  <div class="text-center">
                  <a href="{% url 'export' project.id %}">   <button class="btn btn-simple btn-github">
                       EXPORT
                     </button></a>
                  </div>
                </div>
                <!-- end content-->
              </div>


              <!--  end card  -->
            </div>



            <!-- end col-md-12 -->

          <!-- end row -->



        </div>
          </div>






    </div>
  </div>
  <!--   Core JS Files   -->
  <script src="{% static 'assets/js/core/jquery.min.js' %}"></script>
  <script src="{% static 'assets/js/core/popper.min.js' %}"></script>
  <script src="{% static 'assets/js/core/bootstrap.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins/perfect-scrollbar.jquery.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins/moment.min.js' %}"></script>
  <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
  <script src="{% static 'assets/js/plugins/bootstrap-switch.js' %}"></script>
  <!--  Plugin for Sweet Alert -->
 <script src="{% static 'assets/js/plugins/sweetalert2.min.js' %}"></script>
  <!--  Plugin for Sorting Tables -->
  <script src="{% static 'assets/js/plugins/jquery.tablesorter.js' %}"></script>
  <!-- Forms Validations Plugin -->
  <script src="{% static 'assets/js/plugins/jquery.validate.min.js' %}"></script>
  <!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
  <script src="{% static 'assets/js/plugins/jquery.bootstrap-wizard.js' %}"></script>
  <!--	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
  <script src="{% static 'assets/js/plugins/bootstrap-selectpicker.js' %}"></script>
  <!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
  <script src="{% static 'assets/js/plugins/bootstrap-datetimepicker.js' %}"></script>
  <!--  DataTables.net Plugin, full documentation here: https://datatables.net/    -->
  <script src="{% static 'assets/js/plugins/jquery.dataTables.min.js' %}"></script>
  <!--	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
  <script src="{% static 'assets/js/plugins/bootstrap-tagsinput.js' %}"></script>
  <!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
  <script src="{% static 'assets/js/plugins/jasny-bootstrap.min.js' %}"></script>
  <!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
  <script src="{% static 'assets/js/plugins/fullcalendar/fullcalendar.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins/fullcalendar/daygrid.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins/fullcalendar/timegrid.min.js' %}"></script>
  <script src="{% static 'assets/js/plugins/fullcalendar/interaction.min.js' %}"></script>
  <!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
  <script src="{% static 'assets/js/plugins/jquery-jvectormap.js' %}"></script>
  <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
  <script src="{% static 'assets/js/plugins/nouislider.min.js' %}"></script>
  <!--  Google Maps Plugin    -->
  <!-- Place this tag in your head or just before your close body tag. -->
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE' %}"></script>
  <!-- Chart JS -->
  <script src="{% static 'assets/js/plugins/chartjs.min.js' %}"></script>
  <!--  Notifications Plugin    -->
  <script src="{% static 'assets/js/plugins/bootstrap-notify.js' %}"></script>
  <!-- Control Center for Black Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="{% static 'assets/js/black-dashboard.min.js?v=1.1.1' %}"></script>
  <!-- Black Dashboard DEMO methods, don't include it in your project! -->
  <script src="{% static 'assets/demo/demo.js' %}"></script>
  <script>
  $(document).ready(function() {
    $().ready(function() {
      $sidebar = $('.sidebar');
      $navbar = $('.navbar');
      $main_panel = $('.main-panel');

      $full_page = $('.full-page');

      $sidebar_responsive = $('body > .navbar-collapse');
      sidebar_mini_active = true;
      white_color = false;

      window_width = $(window).width();

      fixed_plugin_open = $('.sidebar .sidebar-wrapper .nav li.active a p').html();



      $('.fixed-plugin a').click(function(event) {
        if ($(this).hasClass('switch-trigger')) {
          if (event.stopPropagation) {
            event.stopPropagation();
          } else if (window.event) {
            window.event.cancelBubble = true;
          }
        }
      });

      $('.fixed-plugin .background-color span').click(function() {
        $(this).siblings().removeClass('active');
        $(this).addClass('active');

        var new_color = $(this).data('color');

        if ($sidebar.length != 0) {
          $sidebar.attr('data', new_color);
        }

        if ($main_panel.length != 0) {
          $main_panel.attr('data', new_color);
        }

        if ($full_page.length != 0) {
          $full_page.attr('filter-color', new_color);
        }

        if ($sidebar_responsive.length != 0) {
          $sidebar_responsive.attr('data', new_color);
        }
      });

      $('.switch-sidebar-mini input').on("switchChange.bootstrapSwitch", function() {
        var $btn = $(this);

        if (sidebar_mini_active == true) {
          $('body').removeClass('sidebar-mini');
          sidebar_mini_active = false;
          blackDashboard.showSidebarMessage('Sidebar mini deactivated...');
        } else {
          $('body').addClass('sidebar-mini');
          sidebar_mini_active = true;
          blackDashboard.showSidebarMessage('Sidebar mini activated...');
        }

        // we simulate the window Resize so the charts will get updated in realtime.
        var simulateWindowResize = setInterval(function() {
          window.dispatchEvent(new Event('resize'));
        }, 180);

        // we stop the simulation of Window Resize after the animations are completed
        setTimeout(function() {
          clearInterval(simulateWindowResize);
        }, 1000);
      });

      $('.switch-change-color input').on("switchChange.bootstrapSwitch", function() {
        var $btn = $(this);

        if (white_color == true) {

          $('body').addClass('change-background');
          setTimeout(function() {
            $('body').removeClass('change-background');
            $('body').removeClass('white-content');
          }, 900);
          white_color = false;
        } else {

          $('body').addClass('change-background');
          setTimeout(function() {
            $('body').removeClass('change-background');
            $('body').addClass('white-content');
          }, 900);

          white_color = true;
        }


      });

      $('.light-badge').click(function() {
        $('body').addClass('white-content');
      });

      $('.dark-badge').click(function() {
        $('body').removeClass('white-content');
      });
    });
  });
</script>
<script>
  $(document).ready(function() {
    $('#datatable').DataTable({
      "pagingType": "full_numbers",
      "lengthMenu": [
        [10, 25, 50, -1],
        [10, 25, 50, "All"]
      ],
      responsive: true,
      language: {
        search: "_INPUT_",
        searchPlaceholder: "Search records",
      }

    });

    var table = $('#datatable').DataTable();

    // Edit record
    table.on('click', '.edit', function() {
      $tr = $(this).closest('tr');
      if ($($tr).hasClass('child')) {
        $tr = $tr.prev('.parent');
      }

      var data = table.row($tr).data();
      alert('You press on Row: ' + data[0] + ' ' + data[1] + ' ' + data[2] + '\'s row.');
    });

    // Delete a record
    table.on('click', '.remove', function(e) {
      $tr = $(this).closest('tr');
      if ($($tr).hasClass('child')) {
        $tr = $tr.prev('.parent');
      }
      table.row($tr).remove().draw();
      e.preventDefault();
    });

    //Like record
    table.on('click', '.like', function() {
      alert('You clicked on Like button');
    });
  });
</script>


</body>

</html>
